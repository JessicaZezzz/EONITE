<app-navbar [imgProfile]="urlImage"></app-navbar>
<div class="w-full flex justify-center">
  <div class="absolute inset-x-0 -z-10 transform-gpu overflow-hidden blur-3xl" aria-hidden="true">
    <div class="relative -z-10 left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]" style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)"></div>
  </div>
  <div class="m-2 max-w-screen-xl">
    <div class="md:flex">
      <div class="p-4 bg-white shadow-md rounded-lg w-[400px] sm:w-[600px] md:w-[800px] lg:w-[1000px]">
        <div class="md:flex flex justify-center">
          <h2 class="md:w-1/3 uppercase tracking-wide text-sm sm:text-lg mb-6 text-center">Akun Profil</h2>
        </div>
        <div class="flex justify-center mb-2">
          <div class="flex flex-col justify-center relative">
            <div class="flex flex-row absolute bottom-0 right-0">
              <label for="file-upload" class="rounded-full bg-[#5C06E4] text-white hover:cursor-pointer">
                <img class="w-8 h-8 p-2" src="../assets/icon/icons8-edit-50.png" alt="">
                <input id="file-upload" name="file-upload" type="file" accept="image/png, image/jpg, image/jpeg" (change)="onFileChanged($event)" class="sr-only">
              </label>
            </div>
            <div class="flex justify-center mb-4">
              <img class="object-cover w-20 h-20 p-1 rounded-full ring-2 ring-indigo-500 flex"
              src={{urlImage}}>
            </div>
          </div>
        </div>
        <form class="space-y-2" [formGroup]="Form1">
          <div class="md:flex mb-4 mt-2 border-b-2 border-[#5C06E4] pb-3">
            <div class="md:w-1/3">
              <legend class="uppercase tracking-wide text-md font-semibold text-[#5C06E4]">PIC Vendor</legend>
            </div>
              <div class="grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-6 w-full">
                <div class="sm:col-span-3">
                  <label for="first-name" class="block text-sm font-medium leading-6 text-gray-900">Nama Depan PIC</label>
                  <div class="mt-1">
                    <input  type="text"
                    formControlName="firstName"
                    class="form-control"
                    placeholder="Masukkan Nama Depan"
                    minlength="1" maxlength="250"
                    [ngClass]="{'border-b-1 border-red-400': firstName.invalid && (firstName.dirty || firstName.touched) && firstName.errors?.['required']}"
                    class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="invalid-feedback">
                    <div *ngIf="firstName.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="last-name" class="block text-sm font-medium leading-6 text-gray-900">Nama Belakang PIC</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="lastName"
                            class="form-control"
                            placeholder="Masukkan Nama Belakang"
                            minlength="1" maxlength="250"
                            [ngClass]="{'border-b-1 border-red-400': lastName.invalid && (lastName.dirty || lastName.touched) && lastName.errors?.['required']}"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="invalid-feedback">
                    <div *ngIf="lastName.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="birth-date" class="block text-sm font-medium leading-6 text-gray-900">Tanggal Lahir PIC</label>
                  <div class="mt-1">
                    <input  type="date"
                            formControlName="birthDate"
                            class="form-control"
                            [max]="maxDate"
                            [ngClass]="{'border-b-1 border-red-400': birthDate.invalid && (birthDate.dirty || birthDate.touched) && birthDate.errors?.['required']}"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="birthDate.invalid && (birthDate.dirty || birthDate.touched)" class="invalid-feedback">
                    <div *ngIf="birthDate.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="phone" class="block text-sm font-medium leading-6 text-gray-900">Nomor Telepon PIC</label>
                  <div class="mt-1">
                    <input  type="text"
                            maxlength="13"
                            phoneMask
                            formControlName="phoneNumber"
                            class="form-control"
                            [ngClass]="{'border-b-1 border-red-400': phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)}"
                            placeholder="Masukkan Nomor Telepon"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)" class="invalid-feedback">
                    <div *ngIf="phoneNumber.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                    <div *ngIf="phoneNumber.errors?.['minlength']" class="text-xs text-red-400">
                      * Kolom ini harus memiliki minimal 10 karakter.
                    </div>
                    <div *ngIf="phoneNumber.errors?.['pattern']" class="text-xs text-red-400">
                      * Nomor telepon tidak valid
                    </div>
                  </div>
                </div>
              </div>
          </div>
          <div class="md:flex mb-4 border-b-2 border-[#5C06E4] pb-3">
            <div class="md:w-1/3">
              <legend class="uppercase tracking-wide text-md font-semibold text-[#5C06E4]">BISNIS</legend>
            </div>
              <div class="grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-6 w-full">
                <div class="sm:col-span-3">
                  <label for="Company Address" class="block text-sm font-medium leading-6 text-gray-900">Username Vendor</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="usernameVendor"
                            class="form-control"
                            placeholder="Masukkan Username Vendor"
                            minlength="1" maxlength="250"
                            [ngClass]="{'border-b-1 border-red-400': usernameVendor.invalid && (usernameVendor.dirty || usernameVendor.touched) && usernameVendor.errors?.['required']}"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="usernameVendor.invalid && (usernameVendor.dirty || usernameVendor.touched)" class="invalid-feedback">
                    <div *ngIf="usernameVendor.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="Company Address" class="block text-sm font-medium leading-6 text-gray-900">Email</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="email"
                            class="form-control"
                            placeholder="Masukkan Email contoh xxx@gmail.com"
                            minlength="1" maxlength="250"
                            [ngClass]="{'border-b-1 border-red-400': email.invalid && (email.dirty || email.touched) && usernameVendor.errors?.['required']}"
                            class="block w-full rounded-md border bg-gray-100 py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="email.invalid && (email.dirty || email.touched)" class="invalid-feedback">
                    <div *ngIf="email.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                    <div *ngIf="!email.errors?.['required'] && email.errors?.['emailValidator']" class="text-xs text-red-400">
                      * Format email salah
                    </div>
                    <div *ngIf="!email.errors?.['required'] && email.errors?.['emailCheck']" class="text-xs text-red-400">
                      * Email sudah di ambil. Silakan gunakan email lain
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="category" class="block text-sm font-medium leading-6 text-gray-900">Kategori</label>
                  <mat-form-field>
                    <mat-select formControlName="categoryId" multiple
                                class="mt-1 block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6"
                                [ngClass]="{'redborder border-b-1 border-red-400': categoryId.invalid && (categoryId.dirty || categoryId.touched)}">
                      <mat-optgroup *ngFor="let group of category" [label]="group.name">
                        <mat-option *ngFor="let task of group.subCategories" [value]="task.id">
                          {{task.name}}
                        </mat-option>
                      </mat-optgroup>
                    </mat-select>
                  </mat-form-field>
                  <div *ngIf="categoryId.invalid && (categoryId.dirty || categoryId.touched)" class="invalid-feedback">
                    <div *ngIf="categoryId.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="domicile" class="block text-sm font-medium leading-6 text-gray-900">Domisili</label>
                  <mat-form-field appearance="fill">
                    <mat-select formControlName="domicileId"
                                class="mt-1 block w-full rounded-md border px-2 py-2.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:py-1.5 sm:leading-6"
                                [ngClass]="{'redborder border-b-1 border-red-400': domicileId.invalid && (domicileId.dirty || domicileId.touched)}">
                      <mat-option *ngFor="let i of domicile" [value]="i.id">{{ i.name }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div *ngIf="domicileId.invalid && (domicileId.dirty || domicileId.touched)" class="invalid-feedback">
                    <div *ngIf="domicileId.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="phone-company" class="block text-sm font-medium leading-6 text-gray-900">Nomor Telepon Bisnis</label>
                  <div class="mt-1">
                    <input  type="text"
                            maxlength="13"
                            phoneMask
                            formControlName="phoneBusiness"
                            class="form-control"
                            [ngClass]="{'border-b-1 border-red-400': phoneBusiness.invalid && (phoneBusiness.dirty || phoneBusiness.touched)}"
                            placeholder="Masukkan Nomor Telepon"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm  placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="phoneBusiness.invalid && (phoneBusiness.dirty || phoneBusiness.touched)" class="invalid-feedback">
                    <div *ngIf="phoneBusiness.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                    <div *ngIf="phoneBusiness.errors?.['minlength']" class="text-xs text-red-400">
                      * Kolom ini harus memiliki minimal 10 karakter.
                    </div>
                    <div *ngIf="phoneBusiness.errors?.['pattern']" class="text-xs text-red-400">
                      * Nomor telepon tidak valid
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="opthours" class="block text-sm font-medium leading-6 text-gray-900">Jam Operasional</label>
                  <div class=" flex flex-row mt-1 items-center">
                    <input  formControlName="startTime"
                            class="form-control"
                            type="time"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                    <span class="px-1">-</span>
                    <input  formControlName="endTime"
                            class="form-control"
                            type="time"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="bankName" class="block text-sm font-medium leading-6 text-gray-900">Nama Rekening Bank</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="bankName"
                            class="form-control"
                            [ngClass]="{'border-b-1 border-red-400': bankName.invalid && (bankName.dirty || bankName.touched)}"
                            placeholder="Masukkan Nama Rekening Bank"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="bankName.invalid && (bankName.dirty || bankName.touched)" class="invalid-feedback">
                    <div *ngIf="bankName.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="bankAccount" class="block text-sm font-medium leading-6 text-gray-900">Nomor Rekening Bank</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="bankAccount"
                            class="form-control"
                            [ngClass]="{'border-b-1 border-red-400': bankAccount.invalid && (bankAccount.dirty || bankAccount.touched)}"
                            placeholder="Masukkan Nomor Rekening Bank"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="bankAccount.invalid && (bankAccount.dirty || bankAccount.touched)" class="invalid-feedback">
                    <div *ngIf="bankAccount.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-3">
                  <label for="bankType" class="block text-sm font-medium leading-6 text-gray-900">Rekening Bank</label>
                  <div class="mt-1">
                    <input  type="text"
                            formControlName="bankType"
                            class="form-control"
                            [ngClass]="{'border-b-1 border-red-400': bankType.invalid && (bankType.dirty || bankType.touched)}"
                            placeholder="Masukkan Rekening Bank"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                  <div *ngIf="bankType.invalid && (bankAccount.dirty || bankType.touched)" class="invalid-feedback">
                    <div *ngIf="bankType.errors?.['required']" class="text-xs text-red-400">
                     * Wajib diisi
                    </div>
                  </div>
                </div>

                <div class="sm:col-span-full">
                  <label for="Company Address" class="block text-sm font-medium leading-6 text-gray-900">Alamat</label>
                  <div class="mt-1">
                    <input formControlName="address"
                            class="form-control"
                            type="text"
                            placeholder="Masukkan Alamat"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                </div>
              </div>
          </div>
          <div class="md:flex mb-4 border-b-2 border-[#5C06E4] pb-3">
            <div class="md:w-1/3">
              <legend class="uppercase tracking-wide text-md font-semibold text-[#5C06E4]">Media Sosial</legend>
            </div>
            <div class="grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-6 w-full">
              <div class="sm:col-span-full flex">
                <div>
                  <label class="block uppercase tracking-wide text-charcoal-darker text-xs font-bold">Instagram</label>
                  <span class="text-xs py-4 px-2 bg-grey-light text-grey-dark">instagram.com/</span>
                </div>
                <div class="mt-1">
                  <input  type="text"
                            formControlName="instagram"
                            class="form-control"
                            placeholder="Masukkan Instagram Url"
                            minlength="1" maxlength="250"
                            [ngClass]="{'border-b-1 border-red-400': instagram.invalid && (instagram.dirty || lastName.touched) && usernameVendor.errors?.['required']}"
                            class="block w-full rounded-md border py-1.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 sm:text-sm sm:leading-6">
                  </div>
                </div>
            </div>
          </div>
        </form>
          <div class="md:flex mb-6">
            <div class="md:w-1/3">
              <legend class="uppercase tracking-wide text-md font-semibold text-[#5C06E4]">Deskripsi</legend>
            </div>
            <div class="grid grid-cols-1 gap-x-6 gap-y-3 sm:grid-cols-6 w-full">
              <div class="sm:col-span-full">
                <angular-editor [config]="config" [(ngModel)]="description"></angular-editor>
              </div>
            </div>
          </div>
          <div *ngIf="!compareArray()" class="flex items-center p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50" role="alert">
            <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Info</span>
            <div>
              <span class="font-medium">Perhatian!</span> Jika Anda menghapus salah satu kategori, kategori produk yang terikat juga akan direset menjadi null.
            </div>
          </div>
          <div class="flex flex-row justify-center space-x-3">
            <button (click)="redirect()" type="button" class="inline-flex w-full justify-center rounded-md bg-red-600 px-5 py-2 md:py-3 text-md font-medium text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">BATAL</button>
            <button (click)="updateVendor()" type="button" class="inline-flex w-full justify-center rounded-md text-white bg-[#5C06E4] hover:bg-indigo-500 px-8 py-2 md:py-3 text-md font-medium hover:text-white shadow-sm hover:bg-[#5C06E4] sm:ml-3 sm:w-auto">SIMPAN</button>
          </div>
      </div>
    </div>
  </div>
</div>
<app-footer></app-footer>
